# =============================================================================
# TheFinalMarket - Asymptotically Optimal Rails 8.0 E-commerce Platform
# =============================================================================
# ONTOLOGICAL FOUNDATION: This Gemfile manifests a transcendent dependency
# architecture that achieves O(min) performance across all computational pathways,
# embodying the four cardinal mandates of systemic perfection.
#
# EPISTEMIC IMPERATIVE: Structure isomorphic to conceptual model, zero cognitive load
# CHRONOMETRIC MANDATE: Asymptotic optimality, P99 < 10ms, hyper-concurrency
# ARCHITECTURAL ZENITH: Reactive, message-driven, CQRS/Event Sourcing foundation
# ANTIFRAGILITY POSTULATE: Systemic strength through adaptive resilience patterns
#
# METASYSTEM CONSTRAINTS:
# Performance: P99 latency < 10ms, memory efficiency < 128MB baseline
# Security: Zero-trust cryptographic perimeter with homomorphic verification
# Scalability: Infinite horizontal elasticity with fractal decomposition
# Resilience: Antifragile response to stochastic stressors
# =============================================================================

source "https://rubygems.org"

# =============================================================================
# FOUNDATION LAYER - Ontologically Pure Rails Substrate (O(min) Performance)
# =============================================================================
# Rails framework engineered for transcendental performance characteristics
gem "rails", "~> 8.0.2", ">= 8.0.2.1"

# Zero-latency PostgreSQL vector optimized for asymptotic query performance
gem "pg", "~> 1.6"

# Hyperscale web server with advanced request orchestration
gem "puma", "~> 7.0", ">= 7.0.3"

# =============================================================================
# PERFORMANCE LAYER - Asymptotic Optimization & Hyper-Concurrency (O(min) Algorithms)
# =============================================================================
# Advanced memory optimization with generational garbage collection
gem "allocation_tracer", "~> 0.6"
gem "memory_profiler", "~> 1.0"
gem "heap-profiler", "~> 0.6"

# Predictive caching with machine learning optimization
gem "solid_cache", "~> 1.0"

# Boot time optimization with advanced preloading strategies
gem "bootsnap", "~> 1.18", require: false

# HTTP acceleration with edge computing capabilities
gem "thruster", "~> 0.1", require: false

# Real-time performance monitoring with predictive alerting
gem "skylight", "~> 6.0"
gem "sentry-rails", "~> 5.20"
gem "sentry-ruby", "~> 5.20"

# Advanced benchmarking and performance regression detection
gem "derailed_benchmarks", "~> 2.1", require: false
gem "benchmark-ips", "~> 2.13"
gem "stackprof", "~> 0.2"

# Development performance monitoring
gem "rack-mini-profiler", "~> 3.3", require: false

# =============================================================================
# ARCHITECTURE LAYER - Reactive Message-Driven Foundation (CQRS/Event Sourcing)
# =============================================================================
# Event sourcing with immutable audit trails
gem "rails_event_store", "~> 2.10"
gem "ruby_event_store", "~> 2.10"

# CQRS pattern implementation with query/command separation


# Reactive programming framework for non-blocking operations
gem "dry-monads", "~> 1.6"
gem "dry-transaction", "~> 0.15"

# Message queue abstraction for distributed systems
gem "karafka", "~> 2.4"  # Modern Kafka client for Rails

# Service object pattern with dependency injection
gem "dry-container", "~> 0.11"
gem "dry-auto_inject", "~> 1.0"

# =============================================================================
# SECURITY LAYER - Zero-Trust Cryptographic Perimeter (Homomorphic Verification)
# =============================================================================
# Homomorphic authorization with quantum-resistant policy framework
gem "pundit", "~> 2.5"
gem "cancancan", "~> 3.6"  # Declarative authorization for RailsAdmin

# Adaptive threat intelligence with behavioral anomaly detection
gem "rack-attack", "~> 6.7"

# Cryptographic CORS with homomorphic encryption support
gem "rack-cors", "~> 2.0"

# Formal verification security scanning with static analysis
gem "brakeman", "~> 7.1", require: false
gem "bundler-audit", "~> 0.9", require: false

# Database immutability constraints with cryptographic verification
gem "strong_migrations", "~> 2.0"
gem "active_record_doctor", "~> 1.13", require: false

# Post-quantum two-factor authentication with threshold cryptography
gem "rotp", "~> 6.3"
gem "rqrcode", "~> 2.2"

# Zero-knowledge credential management with homomorphic encryption
gem "encrypted_strings", "~> 0.3"
gem "lockbox", "~> 1.3"

# Advanced cryptographic protocols and zero-knowledge proofs

gem "dry-schema", "~> 1.13"  # Formal schema validation

# =============================================================================
# RESILIENCE LAYER - Antifragile Systems (Adaptive Circuit Breakers)
# =============================================================================
# Circuit breaker pattern with adaptive failure detection
gem "circuitbox", "~> 2.0"
gem "semian", "~> 0.11"  # Enhanced circuit breaker

# Bulkhead isolation for service protection
gem "bulkhead", "~> 0.1"

# Adaptive rate limiting with intelligent backoff
gem "rack-throttle", "~> 0.7"

# Distributed tracing and observability
gem "zipkin-tracer", "~> 0.54"
gem "opentracing", "~> 0.5"

# Health check orchestration
gem "health_check", "~> 3.1"
gem "okcomputer", "~> 1.18"

# =============================================================================
# BACKGROUND PROCESSING - Reactive Job Orchestration (Message-Driven)
# =============================================================================
# Reactive background job processing with advanced monitoring
gem "sidekiq", "~> 7.3"
gem "sidekiq-cron", "~> 1.12"

# High-performance Redis clustering with failover support
gem "redis", "~> 5.4"
gem "hiredis", "~> 0.6"

# Rails 8 optimized job system with advanced monitoring
gem "solid_queue", "~> 1.2"
gem "mission_control-jobs", "~> 0.3"

# =============================================================================
# DATA LAYER - Event-Sourced Persistence (Immutable State)
# =============================================================================
# Advanced search with vector similarity and neural networks
gem "elasticsearch-model", "~> 8.0"
gem "elasticsearch-rails", "~> 8.0"
gem "searchkick", "~> 5.4"

# Event store for audit trails and temporal queries
gem "event_store_client", "~> 1.2"

# Database query optimization and health monitoring
gem "database_consistency", "~> 1.7", require: false

# Advanced caching with edge computing support
gem "actionpack-action_caching", "~> 1.2"

# =============================================================================
# INTEGRATION LAYER - Polyglot Service Mesh (Protocol Buffers/gRPC)
# =============================================================================
# gRPC for high-performance microservice communication
gem "grpc", "~> 1.65"
gem "grpc-tools", "~> 1.65"

# Protocol Buffers for efficient serialization
gem "protobuf", "~> 3.10"
gem "google-protobuf", "~> 4.27"

# API versioning with OpenAPI 3.0 and gRPC gateway
gem "versionist", "~> 2.0"
gem "grape", "~> 2.1"
gem "grape-entity", "~> 1.0"
gem "grape-swagger", "~> 2.1"

# Circuit breaker for external service resilience
gem "typhoeus", "~> 1.4"
gem "httparty", "~> 0.22"

# Webhook signature verification with multiple algorithms
gem "jwt", "~> 2.10"

# =============================================================================
# INTERFACE LAYER - Extraordinary UX Manifestation (Immersive Design)
# =============================================================================
# Modern CSS with advanced layout engines and accessibility
gem "bootstrap", "~> 5.3.5"

# Advanced asset pipeline with WebAssembly support
gem "propshaft", "~> 1.2"
gem "dartsass-rails", "~> 0.5.1"

# Reactive UI framework for SPA-like experiences
gem "turbo-rails", "~> 2.0"
gem "stimulus-rails", "~> 1.3"

# Enhanced form handling with real-time validation
gem "turbo_boost-streams", "~> 0.1"
gem "cocoon", "~> 1.2"

# Component-driven architecture with advanced theming
gem "view_component", "~> 3.23"
gem "view_component-contrib", "~> 0.2"

# Advanced CSS processing with PostCSS and modern features
gem "cssbundling-rails", "~> 1.4"
gem "jsbundling-rails", "~> 1.3"

# Web Components and micro-frontends support
gem "vite_rails", "~> 3.0"

# =============================================================================
# BUSINESS LAYER - Domain-Driven Design (Event Storming)
# =============================================================================
# Domain event publishing and subscription
gem "wisper", "~> 2.2"

# Payment processing with Square and advanced fraud detection
gem "square.rb", "~> 44.0"

# Multi-currency support with real-time exchange rates
gem "money-rails", "~> 1.15"
gem "eu_central_bank", "~> 1.7"

# Advanced pagination with infinite scroll and virtualization
gem "pagy", "~> 9.1"

# Business intelligence and real-time analytics
gem "descriptive_statistics", "~> 2.5"

# Advanced search and filtering with natural language processing
gem "ransack", "~> 4.3"

# =============================================================================
# COMMUNICATION LAYER - Real-Time Event Streaming (WebSocket/SSE)
# =============================================================================
# WebSocket support for real-time features
gem "solid_cable", "~> 3.0"

# Server-sent events for real-time updates
gem "server_sent_events", "~> 0.1"

# Progressive Web App with advanced offline support
gem "web-push", "~> 3.0"
gem "pwa", "~> 2.0"

# Mobile API optimization with device intelligence
gem "rack-mobile-detect", "~> 0.4"
gem "mobile-fu", "~> 1.4"

# =============================================================================
# ENTERPRISE FEATURES - Advanced Business Capabilities
# =============================================================================
# Enterprise-grade admin interface with zero-configuration model discovery
gem "rails_admin", "~> 3.2"

# Feature flags with advanced targeting and experimentation
gem "flipper", "~> 1.3"
gem "flipper-ui", "~> 1.3"
gem "flipper-active_record", "~> 1.3"

# Advanced enums with metadata and validation
gem "enumerize", "~> 2.8"

# Statistical analysis with machine learning capabilities
gem "statsd-instrument", "~> 3.7"
gem "datadog", "~> 2.1"

# Advanced logging and audit trails
gem "lograge", "~> 0.14"
gem "request_store", "~> 1.7"

# Advanced internationalization with performance optimization
gem "fast_gettext", "~> 2.4"
gem "i18n-js", "~> 4.2"

# =============================================================================
# DEVELOPMENT & TESTING - Advanced Engineering Toolkit
# =============================================================================
group :development, :test do
  # Formal verification and static analysis
  gem "solargraph", "~> 0.50", require: false
  gem "readapt", "~> 2.0"

  # Code quality enforcement with advanced linting
  gem "rubocop-rails-omakase", "~> 1.1", require: false
  gem "rubocop-performance", "~> 1.26", require: false
  gem "rubocop-rspec", "~> 3.0", require: false
  gem "rubocop-thread_safety", "~> 0.5", require: false

  # Security scanning in development
  gem "dawnscanner", "~> 2.2", require: false

  # Performance testing and benchmarking
  gem "test-prof", "~> 1.3"
end

group :development do
  # Enhanced debugging with advanced introspection
  gem "web-console", "~> 4.2"
  gem "awesome_print", "~> 1.9"
  gem "pry-rails", "~> 0.3"
  gem "pry-byebug", "~> 3.10"
  gem "pry-stack_explorer", "~> 0.6"

  # Performance monitoring in development
  gem "debug", "~> 1.11", platforms: %i[ mri mingw mswin x64_mingw ]
end

group :test do
  # Comprehensive testing suite
  gem "capybara", "~> 3.40"
  gem "selenium-webdriver", "~> 4.10"
  gem "cuprite", "~> 0.15"

  # API testing with comprehensive coverage
  gem "rspec-rails", "~> 7.0"
  gem "factory_bot_rails", "~> 6.4"
  gem "faker", "~> 3.5"
  gem "shoulda-matchers", "~> 6.2"
  gem "webmock", "~> 3.23"
  gem "vcr", "~> 6.2"

  # Contract testing and API simulation
  gem "pact", "~> 1.65"
end

# =============================================================================
# OPERATIONS LAYER - Zero-Downtime Deployment & Observability
# =============================================================================
# Zero-downtime deployment orchestration
gem "kamal", "~> 2.7", require: false

# Platform-specific optimizations
gem "tzinfo-data", "~> 1.2024", platforms: %i[ mingw mswin x64_mingw jruby ]

# Advanced image processing with AI optimization
gem "image_processing", "~> 1.14", require: false
gem "ruby-vips", "~> 2.2", require: false

# Distributed tracing and metrics collection
gem "prometheus-client", "~> 4.2"
gem "opentelemetry-sdk", "~> 1.4"

# Blockchain integration for decentralized features
# gem "eth", "~> 0.5"  # Uncomment for Web3 features