<!-- app/views/admin/users/show.html.erb -->
<h1>User Details: <%= @user.username %></h1>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  <div class="col-span-2">
    <div class="card">
      <h2>User Information</h2>
      <p><strong>Email:</strong> <%= @user.email %></p>
      <p><strong>Role:</strong> <%= @user.role.humanize %></p>
      <p><strong>Seller:</strong> <%= @user.seller? ? "Yes" : "No" %></p>
      <p><strong>Seller Verified:</strong> <%= @user.seller_verified? ? "Yes" : "No" %></p>
      <p><strong>Status:</strong> <%= @user.suspended? ? "Suspended" : "Active" %></p>
      <% if @user.suspended? %>
        <p><strong>Suspension Reason:</strong> <%= @user.suspension_reason %></p>
      <% end %>
    </div>
  </div>

  <div>
    <div class="card">
      <h2>Actions</h2>
      <% unless @user.suspended? %>
        <div class="form-group">
          <%= form_with(url: suspend_admin_user_path(@user), method: :patch) do |form| %>
            <%= form.label :reason, "Suspension Reason" %>
            <%= form.text_area :reason, class: "form-control", rows: 2 %>
            <%= form.submit "Suspend User", class: "btn btn-danger mt-2", data: { confirm: "Are you sure you want to suspend this user?" } %>
          <% end %>
        </div>
      <% end %>

      <hr class="my-4">

      <div class="form-group">
        <%= form_with(url: warn_admin_user_path(@user), method: :post) do |form| %>
          <%= form.label :reason, "Warning Reason" %>
          <%= form.text_area :reason, class: "form-control", rows: 2 %>
          <%= form.submit "Issue Warning", class: "btn btn-warning mt-2" %>
        <% end %>
      </div>

      <% if @user.seller? && !@user.seller_verified? %>
        <hr class="my-4">
        <div>
          <%= button_to "Verify Seller", verify_seller_admin_user_path(@user), method: :patch, class: "btn btn-success" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
